#!/bin/bash

# Simple shell wrapper for json_expander.py
# Sets up Mu2e environment and calls the Python script

# Check required arguments
if [[ $# -eq 0 ]] || [[ "$1" == "--help" ]] || [[ "$1" == "-h" ]]; then
    echo "Usage: jsonexpander [options]"
    echo "  --json <json_file>     JSON configuration file (required)"
    echo "  --output <file>        Output file"
    echo "  --verbose              Enable verbose output"
    echo ""
    echo "Example:"
    echo "  jsonexpander --json config.json --output expanded_config.json"
    exit 1
fi

# Find and execute the Python script
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PYTHON_SCRIPT="$SCRIPT_DIR/../utils/jsonexpander.py"

if [[ ! -f "$PYTHON_SCRIPT" ]]; then
    echo "Error: Python script not found at $PYTHON_SCRIPT"
    exit 1
fi

# Execute the Python script with all arguments
exec python3 "$PYTHON_SCRIPT" "$@"
